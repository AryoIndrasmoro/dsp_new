<?xml version="1.0" encoding="utf-8"?>
<openerp>
    <data>    	
	    <record id="product_normal_form_view_inherit" model="ir.ui.view">
			<field name="name">product.normal.form.inherit</field>
			<field name="model">product.product</field>
			<field name="inherit_id" ref="product.product_normal_form_view"/>
			<field name="arch" type="xml">
				<page string="Information" position="after">
					<page string="Wine Description">
						<group>
							<group>
								<field name="country_id"/>
								<field name="region_id"/>
							</group>
							<group>
								<field name="type_id"/>
								<field name="appelation_id"/>
							</group>				
							<group>
								<field name="vintages" string="Vintage"/>	
								<field name="classification"/>
								<field name="grape_id"/>
							</group>
							<group>
								<field name="volume_l"/>
								<field name="volume_alcohol"/>
							</group>										
							<group>
								<field name="brand"/>
								<field name="foc"/>
							</group>
						</group>
					</page>
				</page>				
				<xpath expr="/form/sheet/notebook/page[@string='Sales']" position="after">
	                <page string="Price List" groups="base.group_erp_manager">
	                	<group>
	                		<group>
		                		<field name="base_cost" readonly="1"/>		                		
		                		<field name="jkt_cost" readonly="1"/>
		                	</group>
		                	<group>
		                		<label for="margin"/>
			                	<div>
				                    <field name="margin" class="oe_inline"/> percent
			                	</div>			                
		                		<field name="suggest_price"/>
		                		<field name="real_price"/>		                		                				                
		                	</group>
	                	</group>               
	                </page>
	            </xpath>	            
			</field>			
		</record>		
	    
	    <record model="ir.ui.view" id="product.product_kanban_view_inherit">
	        <field name="name">Product Kanban Inherit</field>
	        <field name="model">product.product</field>
	        <field name="inherit_id" ref="product.product_kanban_view"/>
	        <field name="arch" type="xml">	        	                   
	            <div class="oe_kanban_vignette oe_semantic_html_override" position="replace">
            		<div class="oe_kanban_vignette oe_semantic_html_override">
                    	<a type="open"><img t-att-src="kanban_image('product.product', 'image_small', record.id.value)" class="oe_kanban_image"/></a>
                    	<div class="oe_kanban_details">
	                        <h4>
                            	<a type="open">
                                 	<t t-if="record.code.raw_value">[<field name="code"/>]</t> <field name="name"/>
                            	</a>
                        	</h4>
                        	<div name="tags"/>
                        	<ul>
	                            <field name="lst_price" invisible="1"/>
                        	</ul>
                    	</div>
                    </div>
                </div>       	                	
                <field name="name" position="after">
	            	<t t-if="record.vintages.raw_value"> - <field name="vintages"/></t> 
	            </field>	                            	            
				<ul position="inside">                    
                    <li t-if="record.type.raw_value != 'service'">SG Cost: <field name="base_cost"/></li>
                    <li t-if="record.type.raw_value != 'service'">JKT Cost: <field name="jkt_cost"/></li>
                    <li t-if="record.type.raw_value != 'service'">Suggest Price: <field name="suggest_price"/></li>
                    <li t-if="record.type.raw_value != 'service'">Real Price: <field name="real_price"/></li>
                </ul>            	   
	        </field>
	    </record>
    
		<record id="product_product_tree_pricelist_view" model="ir.ui.view">
            <field name="name">product.product.tree.pricelist</field>
            <field name="model">product.product</field>
            <field name="inherit_id" ref="product.product_product_tree_view"/>
            <field name="arch" type="xml">
                <field name="name" position="after">                	
                	<field name="vintages"/>                	
                	<field name="country_id"/>
                	<field name="region_id"/>
                	<field name="grape_id"/>
                	<field name="type_id"/>
                	<field name="volume_l"/>
                	<field name="volume_alcohol"/>
                	<field name="appelation_id"/>
                	<field name="brand"/>
                	<field name="classification"/>                	   	          
                </field>         
                <field name="standard_price" position="replace">
                	<field name="standard_price" invisible='1'/>                	              
                </field>
                <field name="lst_price" position="replace">
                	<field name="lst_price" invisible='1'/>                	              
                </field>                
                <field name="virtual_available" position="after">
                	<field name="foc"/>             
                </field>
            </field>
       	</record>
		
		<record id="view_product_standard_price_form_dsp" model="ir.ui.view">
            <field name="name">product.product.standard.price.form.inherit.dsp</field>
            <field name="model">product.product</field>
            <field name="inherit_id" ref="stock.view_product_standard_price_form"/>
            <field name="arch" type="xml">                        
            	<xpath expr="/form/sheet/notebook/page[@string='Information']/group/group[1]/field[@name='list_price']" position="attributes">
            		<attribute name="invisible">True</attribute>           	
            	</xpath>            	            	                        	                	      
            </field>
        </record>
        
        <record id="product_search_form_view_dsp" model="ir.ui.view">
            <field name="name">product.search.form.dsp</field>
            <field name="model">product.product</field>
            <field name="inherit_id" ref="product.product_search_form_view"/>
            <field name="arch" type="xml">
            	<xpath expr="/search/group/filter[@string='Type']" position="after">            		            
                   <filter string='Vintage' icon="terp-stock_symbol-selection" domain="[]" context="{'group_by' : 'vintages'}"/>                       	                               
                   <filter string='Classification' icon="terp-stock_symbol-selection" domain="[]" context="{'group_by' : 'classification'}"/>
                   <filter string='Volume L' icon="terp-stock_symbol-selection" domain="[]" context="{'group_by' : 'volume_l'}"/>
                   <filter string='Volume Alcohol' icon="terp-stock_symbol-selection" domain="[]" context="{'group_by' : 'volume_alcohol'}"/>
                   <filter string='Grape' icon="terp-stock_symbol-selection" domain="[]" context="{'group_by' : 'grape_id'}"/>
                   <filter string='Country' icon="terp-stock_symbol-selection" domain="[]" context="{'group_by' : 'country_id'}"/>
                   <filter string='Region' icon="terp-stock_symbol-selection" domain="[]" context="{'group_by' : 'region_id'}"/>
                   <filter string='Appelation' icon="terp-stock_symbol-selection" domain="[]" context="{'group_by' : 'appelation_id'}"/>
                   <filter string='Type' icon="terp-stock_symbol-selection" domain="[]" context="{'group_by' : 'type_id'}"/>
                   <filter string='FOC' icon="terp-stock_symbol-selection" domain="[]" context="{'group_by' : 'foc'}"/>
         		</xpath>
            </field>
        </record>
        
        <record id="product_product_tree_view_dsp" model="ir.ui.view">
            <field name="name">product.product.tree.dsp</field>
            <field name="model">product.product</field>
            <field name="inherit_id" ref="product.product_product_tree_view"/>
            <field name="arch" type="xml">   
				<tree position="attributes">
    				<attribute name="colors">red:virtual_available&lt;0;blue:virtual_available&gt;=0 and state in ('draft', 'end', 'obsolete');black:virtual_available&gt;=0 and state not in ('draft', 'end', 'obsolete')</attribute>
				</tree>            	                              
				<field name="default_code" position="replace">
					<field name="default_code" invisible="1"/>
				</field>
				<field name="state" position="replace">
					<field name="state" invisible="1"/>
				</field>
            </field>
        </record>       
        
        <record id="product_product_list_tree_view" model="ir.ui.view">
            <field name="name">product.product.list.tree</field>
            <field name="model">product.template</field>      
            <field name="inherit_id" ref="product.product_template_tree_view"/>
            <field name="arch" type="xml">               	         	
            	<field name="name" position="after">
            		<field name="vintages"/>
            		<field name="volume_l"/>                		            		
            		<field name="base_cost"/>
            		<field name="jkt_cost"/>
            		<field name="margin"/>
            		<field name="suggest_price"/>
            		<field name="real_price"/>
            		<field name="foc"/>            		
            	</field>                      
            	<field name="categ_id" position="replace">
            		<field name="categ_id" invisible="1"/>
            	</field>                  		
            	<field name="type" position="replace">
            		<field name="type" invisible="1"/>
            	</field>
            	<field name="state" position="replace">
            		<field name="state" invisible="1"/>
            	</field>
            	<tree position="attributes">
    				<attribute name="colors">orange:suggest_price != real_price</attribute>
    				<attribute name="create">false</attribute>
    				<attribute name="version">7.0</attribute>
				</tree>
            </field>
       	</record>
       	
       	<record id="product_list_search_form_view" model="ir.ui.view">
            <field name="name">product.list.search.form</field>
            <field name="model">product.template</field>            
            <field name="arch" type="xml">
            	<search string="Products">
            		<group string="Filter">
            			<field name="name" string="Product Name" filter_domain="[('name','ilike',self)]"/>
            			<field name="vintages" string="Vintages" filter_domain="[('vintages','ilike',self)]"/>
            			<field name="volume_l" string="Volume L" filter_domain="[('volume_l','ilike',self)]"/>            			
            		</group>
					<group string="Group By..">
						<filter string='Vintage' icon="terp-stock_symbol-selection" domain="[]" context="{'group_by' : 'vintages'}"/>						
						<filter string='Volume L' icon="terp-stock_symbol-selection" domain="[]" context="{'group_by' : 'volume_l'}"/>						
						<filter string='FOC' icon="terp-stock_symbol-selection" domain="[]" context="{'group_by' : 'foc'}"/>
					</group>            		
            	</search>            	
            </field>            	
        </record>                     	
        
        <record id="product_list_action_tree" model="ir.actions.act_window">
            <field name="name">Product List</field>
            <field name="type">ir.actions.act_window</field>
            <field name="res_model">product.template</field>
            <field name="inherit_id" ref="product.product_template_tree_view"/>
            <field name="view_type">form</field>                                  
            <field name="search_view_id" ref="product_list_search_form_view"/>
        </record>
        
    	<menuitem action="product_list_action_tree" 
    		id="menu_product_list" parent="base.menu_product" sequence="1"/>
    				       
    </data>
</openerp>