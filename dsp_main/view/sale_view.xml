<openerp>
	<data>		
    	<record id="view_order_pricelist_form" model="ir.ui.view">
            <field name="name">sale.order.pricelist.form</field>
            <field name="model">sale.order</field>
            <field name="inherit_id" ref="sale.view_order_form"/>
            <field name="arch" type="xml">																	
				<button name="action_button_confirm" position="replace">
					<button name="action_button_confirm" states="quotation_confirm" string="Confirm Sale" type="object" groups="base.group_user"/>
				</button>				
				<button name="action_button_confirm" states="sent" position="replace">
					<button name="action_confirm_quotation" states="sent" string="Confirm Quotation" type="object" groups="base.group_user" class="oe_highlight"/>
				</button>
				<button name="action_quotation_send" position="replace">
					<button name="action_quotation_send" string="Send by Email" type="object" states="draft,quotation_confirm" class="oe_highlight" groups="base.group_user"/>
				</button>
				<button name="print_quotation" position="replace">          
					<button name="print_quotation" string="Print" type="object" states="draft,quotation_confirm" class="oe_highlight" groups="base.group_user"/>
				</button>
				<button name="cancel" position="replace">
					<button name="cancel" states="draft,quotation_confirm,sent" string="Cancel Quotation" groups="base.group_user"/>
				</button>													          
				<button name="print_quotation" position="after">          
					<button name="action_confirm_quotation" states="draft" string="Confirm Quotation" type="object" groups="base.group_user"/>
				</button>				
        		<field name="partner_shipping_id" position="after">
            		<field name="sale_type" on_change="onchange_sale_type(sale_type, partner_id)" groups="base.group_sale_salesman_all_leads,base.group_sale_manager"/>
            		<field name="total_fee"/>
                </field>     
                                        		
				<page string="Other Information" groups="base.group_user" position="after">
			  		<page string="Quotation Confirmation">
			  			<group>
			  				<field name="date_confirmed" attrs="{'required':[('state','=','quotation_confirm')]}" />
							<field name="person_name" attrs="{'required':[('state','=','quotation_confirm')]}" />
							<field name="file_confirmed" attrs="{'required':[('state','=','quotation_confirm')]}" />
		 	  			</group>
			  		</page>
			  		<page string="Order Confirmation">
			  			<group>
			  				<field name="date_confirmed_order" attrs="{'required':[('state','=','progress')]}" />
							<field name="person_name_order" attrs="{'required':[('state','=','progress')]}" />
							<field name="file_confirmed_order" attrs="{'required':[('state','=','progress')]}" />
		 	  			</group>
			  		</page>
				</page>
			      			            		
        		<xpath expr="//form/sheet/notebook/page[@string='Order Lines']/field[@name='order_line']/form/group/group[1]/field[@name='price_unit']" position="attributes">
        			<attribute name="groups">base.group_erp_manager</attribute>
        		</xpath>	
        	
        		<xpath expr="//form/sheet/group/group[1]/field[@name='sale_type']" position="after">
        			<field name="dsp_price_list_id" invisible="1"/>
        		</xpath>
        		
        		<xpath expr="//form/sheet/notebook/page[@string='Order Lines']/field[@name='order_line']/form/group/group[1]/field[@name='product_id']" position="after">
        			<field name="product_dsp_id" on_change="onchange_product_dsp_id(product_dsp_id, product_uom_qty, parent.sale_type, parent.dsp_price_list_id, parent.partner_id)"/>           		
        		</xpath>        
        		
        		<field name="product_dsp_id" position="after">
        			<field name="qty_on_hand" readonly="1"/>
        			<field name="qty_reserved" readonly="1"/>
        		</field>
        		
        		<xpath expr="//form/sheet/group/group/field[@name='partner_id']" position="replace">
        			<field name="partner_id" on_change="onchange_partner_id_dsp(sale_type, partner_id, context)" domain="[('customer','=',True)]" context="{'search_default_customer':1, 'show_address': 1}" options='{"always_reload": True}'/>           		
        		</xpath>
        		    		        		
            </field>
    	</record>
    	
    	
    	<record id="view_order_pricelist_form2" model="ir.ui.view">
            <field name="name">sale.order.pricelist.form2</field>
            <field name="model">sale.order</field>
            <field name="inherit_id" ref="sale.view_order_form"/>
            <field name="arch" type="xml">
            	<data>            		            		
            		<div name="discount" groups="sale.group_discount_per_so_line" position="after">
            			<field name="fee"/>
                        <field name="cons_doc" readonly="1" 
                        	on_change="onchange_cons_doc(cons_doc, product_dsp_id, parent.sale_type, parent.partner_id)"/>                        
                        <field name="jkt_cost" invisible="1"/>                        
                        <field name="profit" invisible="1"/>
                        <field name="sub_profit" invisible="1"/>                        	            			           	
                    </div>              
                    <div name="discount" groups="sale.group_discount_per_so_line" position="replace">
                        <div name="discount" groups="sale.group_discount_per_so_line">
                            <field name="discount" class="oe_inline" readonly="1"/>
                        </div>
                    </div>      
            	</data>
            </field>
    	</record>    	    	
    	
    	<record id="view_order_tree_dsp2" model="ir.ui.view">
            <field name="name">sale.order.tree.dsp2</field>
            <field name="model">sale.order</field>            
            <field name="inherit_id" ref="sale.view_order_tree"/>
            <field name="arch" type="xml">               	
                <field name="amount_total" position="after">
                	<field name="total_fee"/>	
                </field>	               
            </field>
        </record>
        
    	<record id="view_order_tree_dsp" model="ir.ui.view">
            <field name="name">sale.order.tree.dsp</field>
            <field name="model">sale.order</field>
            <field name="inherit_id" ref="sale.view_order_form"/>
            <field name="arch" type="xml">
            	<xpath expr="/form/sheet/notebook/page[@string='Order Lines']/field[@name='order_line']/tree/field[@name='product_id']" position="replace">
        			<field name="product_id" invisible="1"/>
        		</xpath>
        		<xpath expr="/form/sheet/notebook/page[@string='Order Lines']/field[@name='order_line']/tree/field[@name='name']" position="replace">
        			<field name="name" string="Product"/>
        		</xpath>
        		<xpath expr="/form/sheet/notebook/page[@string='Order Lines']/field[@name='order_line']/tree/field[@name='discount']" position="after">
        			<field name="fee"/>
        			<field name="total_discount" string="Total Discount"/>
        		</xpath>
            </field>
    	</record>
    	
    	<record id="view_shop_form" model="ir.ui.view">
            <field name="name">sale.shop</field>
            <field name="model">sale.shop</field>
            <field name="inherit_id" ref="sale.view_shop_form"/>
            <field name="arch" type="xml">                
                <field name="company_id" position="after">
                	<field name="outlet"/>                	
               	</field>                       
           </field>
        </record>
                        
	</data>
</openerp>